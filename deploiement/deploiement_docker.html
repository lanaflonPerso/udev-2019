

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Déploiement avec Docker &mdash; Documentation U&#39;Dev 2019 </title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_rtd_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="prev" title="Déploiement vers Heroku" href="deploiement_heroku.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> U'Dev 2019
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Recherche dans les pages" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Java EE pour le Web</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../javaee_web/environnement_developpement.html">L’environnement de développement</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/environnement_developpement.html#telechargement-des-outils">Téléchargement des outils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/environnement_developpement.html#installation-des-outils">Installation des outils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/environnement_developpement.html#configuration-de-java-dans-eclipse">Configuration de Java dans Eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/environnement_developpement.html#integration-de-tomcat-dans-eclipse">Intégration de Tomcat dans Eclipse</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javaee_web/premiere_application.html">Une première application</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/premiere_application.html#qu-est-ce-qu-une-application-java-ee">Qu’est-ce qu’une application Java EE ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/premiere_application.html#creation-d-un-projet-dans-eclipse">Création d’un projet dans Eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/premiere_application.html#deploiement-depuis-eclipse-et-test-de-l-application">Déploiement depuis Eclipse et test de l’application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/premiere_application.html#le-contexte-racine-de-deploiement-root-context">Le contexte racine de déploiement (root context)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/premiere_application.html#packaging-de-l-application">Packaging de l’application</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javaee_web/maven.html">Introduction à Maven</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/maven.html#pourquoi-utiliser-maven">Pourquoi utiliser Maven ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/maven.html#caracteristiques-principales-de-maven">Caractéristiques principales de Maven</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/maven.html#installation-de-maven">Installation de Maven</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/maven.html#un-premier-projet-avec-maven">Un premier projet avec Maven</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/maven.html#le-fichier-pom-xml">Le fichier pom.xml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/maven.html#import-du-projet-maven-dans-eclipse">Import du projet Maven dans Eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/maven.html#test-de-l-application-dans-tomcat">Test de l’application dans Tomcat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/maven.html#gerer-le-projet-avec-maven">Gérer le projet avec Maven</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/maven.html#execution-de-maven-dans-eclipse">Exécution de Maven dans Eclipse</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javaee_web/servlet.html">Les Servlets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/servlet.html#structure-d-une-servlet-http">Structure d’une servlet HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/servlet.html#configuration-du-deploiement-d-une-servlet">Configuration du déploiement d’une servlet</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/servlet.html#chemin-absolu-d-url-dans-une-application-web">Chemin absolu d’URL dans une application Web</a></li>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/servlet.html#motif-d-url-d-une-servlet">Motif d’URL d’une Servlet</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/servlet.html#utilisation-du-fichier-de-deploiement-web-xml">Utilisation du fichier de déploiement web.xml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/servlet.html#exercice">Exercice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javaee_web/conteneur_web.html">Le conteneur Web</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/conteneur_web.html#cycle-de-vie-des-servlets">Cycle de vie des servlets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/conteneur_web.html#exercice">Exercice</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/conteneur_web.html#servlet-et-programmation-concurrente">Servlet et programmation concurrente</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/conteneur_web.html#id1">Exercice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javaee_web/attributs_web.html">Les attributs d’une application Web</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/attributs_web.html#attribut-de-portee-requete">Attribut de portée requête</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/attributs_web.html#attribut-de-portee-session">Attribut de portée session</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/attributs_web.html#session-http-comment-cela-marche-t-il">Session HTTP : comment cela marche-t-il ?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/attributs_web.html#les-attributs-de-portee-application">Les attributs de portée application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/attributs_web.html#exercices">Exercices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javaee_web/jsp.html">JSP : Java Server Pages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jsp.html#exercice">Exercice</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jsp.html#el-expression-language">EL : Expression Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jsp.html#les-operateurs-dans-l-expression-language">Les opérateurs dans l’expression language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jsp.html#les-objets-implicites-dans-une-jsp">Les objets implicites dans une JSP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jsp.html#la-resolution-de-portee-des-attributs-dans-une-jsp">La résolution de portée des attributs dans une JSP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/jsp.html#expression-language-et-gestion-des-exceptions">Expression Language et gestion des exceptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jsp.html#les-directives-de-jsp">Les directives de JSP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/jsp.html#la-directive-page">La directive page</a></li>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/jsp.html#la-directive-include">La directive include</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jsp.html#les-balises-d-action-jsp">Les balises d’action JSP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jsp.html#les-taglibs-et-la-jstl">Les Taglibs et la JSTL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/jsp.html#jstl-core">JSTL core</a></li>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/jsp.html#jstl-formater">JSTL formater</a></li>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/jsp.html#jstl-functions">JSTL functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/jsp.html#jstl-sql">JSTL SQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/jsp.html#jstl-xml">JSTL XML</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jsp.html#exercices">Exercices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javaee_web/request_dispatcher.html">RequestDispatcher et MVC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/request_dispatcher.html#le-request-dispatcher">Le request dispatcher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/request_dispatcher.html#le-modele-mvc">Le modèle MVC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/request_dispatcher.html#exercice">Exercice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javaee_web/web_listeners_filters.html">Web listeners et filtres</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/web_listeners_filters.html#les-listeners-web">Les listeners Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/web_listeners_filters.html#declaration-des-listeners-web">Déclaration des listeners Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/web_listeners_filters.html#exemple-d-utilisation-d-un-listener">Exemple d’utilisation d’un listener</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/web_listeners_filters.html#les-filtres-de-servlet">Les filtres de Servlet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/web_listeners_filters.html#declaration-des-filtres">Déclaration des filtres</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/web_listeners_filters.html#implementation-d-un-filtre">Implémentation d’un filtre</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/web_listeners_filters.html#cas-d-utilisation-de-filtres">Cas d’utilisation de filtres</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/web_listeners_filters.html#gestion-de-l-utf-8">Gestion de l’UTF-8</a></li>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/web_listeners_filters.html#generation-de-log">Génération de log</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javaee_web/jdbc_webapp.html">JDBC dans une application Web</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jdbc_webapp.html#acces-a-une-datasource">Accès à une DataSource</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jdbc_webapp.html#injection-d-une-datasource">Injection d’une DataSource</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jdbc_webapp.html#declaration-de-la-datasource-dans-le-fichier-web-xml">Déclaration de la DataSource dans le fichier web.xml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jdbc_webapp.html#declaration-d-une-datasource-dans-tomcat">Déclaration d’une DataSource dans Tomcat</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../javaee_web/jaxrs.html">Les API Web avec JAX-RS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jaxrs.html#la-notion-de-ressource">La notion de ressource</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jaxrs.html#configurer-une-application-web-pour-jax-rs">Configurer une application Web pour JAX-RS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jaxrs.html#implementer-des-ressources-avec-jax-rs">Implémenter des ressources avec JAX-RS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/jaxrs.html#les-annotations-de-methodes">Les annotations de méthodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../javaee_web/jaxrs.html#parametre-dans-le-chemin-d-uri">Paramètre dans le chemin d’URI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jaxrs.html#data-binding">Data binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jaxrs.html#generer-une-reponse">Générer une réponse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jaxrs.html#gerer-des-exceptions">Gérer des exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../javaee_web/jaxrs.html#implementer-un-client-http">Implémenter un client HTTP</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API Web et service Web</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../http/api_web.html">HTTP, REST et les API Web</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../http/http.html">Le protocole HTTP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../http/http.html#structure-des-messages">Structure des messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http.html#exercice">Exercice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http.html#les-codes-de-statut">Les codes de statut</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http.html#les-methodes-http">Les méthodes HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http.html#proprietes-des-methodes-http">Propriétés des méthodes HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http.html#les-en-tetes-http">Les en-têtes HTTP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http.html#id1">Exercice</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../http/http_cas_utilisation.html">HTTP : les cas d’utilisation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../http/http_cas_utilisation.html#obtenir-la-representation-d-une-ressource">Obtenir la représentation d’une ressource</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_cas_utilisation.html#obtenir-uniquement-les-meta-informations-d-une-ressource">Obtenir uniquement les meta-informations d’une ressource</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_cas_utilisation.html#creer-une-ressource-dont-on-connait-l-uri">Créer une ressource dont on connait l’URI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_cas_utilisation.html#creer-une-ressource-dont-on-ne-connait-pas-l-uri">Créer une ressource dont on ne connait pas l’URI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_cas_utilisation.html#supprimer-l-acces-a-une-ressource">Supprimer l’accès à une ressource</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_cas_utilisation.html#mettre-a-jour-une-ressource">Mettre à jour une ressource</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_cas_utilisation.html#mettre-a-jour-partiellement-une-ressource">Mettre à jour partiellement une ressource</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_cas_utilisation.html#executer-un-processus-de-traitement">Exécuter un processus de traitement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_cas_utilisation.html#connaitre-les-methodes-autorisees">Connaître les méthodes autorisées</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_cas_utilisation.html#traitement-asynchrone-d-une-requete">Traitement asynchrone d’une requête</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_cas_utilisation.html#les-redirections">Les redirections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../http/http_cas_utilisation.html#evolution-du-service">Évolution du service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../http/http_cas_utilisation.html#uri-volatile-et-canonicalisation-d-uri">URI volatile et canonicalisation d’URI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../http/http_cas_utilisation.html#separer-le-traitement-de-la-requete-de-son-resultat">Séparer le traitement de la requête de son résultat</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_cas_utilisation.html#exercice">Exercice</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../http/http_negociation_contenu.html">HTTP : la négociation de contenu</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../http/http_negociation_contenu.html#la-negociation-de-type-de-contenu">La négociation de type de contenu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_negociation_contenu.html#la-negociation-de-jeu-de-caracteres">La négociation de jeu de caractères</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_negociation_contenu.html#la-negociation-de-langue">La négociation de langue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_negociation_contenu.html#l-en-tete-vary">L’en-tête Vary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_negociation_contenu.html#exercice">Exercice</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../http/http_requetes_conditionnelles.html">HTTP : les requêtes conditionnelles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../http/http_requetes_conditionnelles.html#demander-une-representation-a-jour">Demander une représentation à jour</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_requetes_conditionnelles.html#creer-une-ressource-si-elle-n-existe-pas-deja">Créer une ressource si elle n’existe pas déjà</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_requetes_conditionnelles.html#alterer-une-ressource-sous-condition">Altérer une ressource sous condition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_requetes_conditionnelles.html#alterer-une-ressource-si-elle-existe">Altérer une ressource si elle existe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_requetes_conditionnelles.html#exercice">Exercice</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../http/http_gestion_cache.html">HTTP : la gestion du cache</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../http/http_gestion_cache.html#serveur-d-origine-et-intermediaires">Serveur d’origine et intermédiaires</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_gestion_cache.html#principe-generale-de-la-gestion-du-cache">Principe générale de la gestion du cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_gestion_cache.html#la-fraicheur-d-une-reponse">La fraîcheur d’une réponse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_gestion_cache.html#la-revalidation">La revalidation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_gestion_cache.html#les-directives-de-strategie-de-cache">Les directives de stratégie de cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_gestion_cache.html#l-invalidation-de-cache">L’invalidation de cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_gestion_cache.html#enrichissement-des-en-tetes-par-les-intermediaires">Enrichissement des en-têtes par les intermédiaires</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../http/http_liens.html">HTTP : les liens</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../http/http_liens.html#l-en-tete-link">L’en-tête Link</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_liens.html#les-types-de-relation">Les types de relation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/http_liens.html#les-attributs-optionnels-d-un-lien">Les attributs optionnels d’un lien</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../http/rest.html">REST</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../http/rest.html#la-ressource">La ressource</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/rest.html#uri-informative-ou-uri-opaque">URI informative ou URI opaque ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/rest.html#ressource-contre-rpc">Ressource contre RPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/rest.html#la-representation">La représentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/rest.html#les-contraintes-rest">Les contraintes REST</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../http/rest.html#client-serveur">Client/Serveur</a></li>
<li class="toctree-l4"><a class="reference internal" href="../http/rest.html#interface-uniforme">Interface uniforme</a></li>
<li class="toctree-l4"><a class="reference internal" href="../http/rest.html#sans-etat-stateless">Sans état (stateless)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../http/rest.html#mise-en-cache-caching">Mise en cache (caching)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../http/rest.html#layered-system">Layered system</a></li>
<li class="toctree-l4"><a class="reference internal" href="../http/rest.html#code-on-demand">Code on demand</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../http/rest.html#hypermedia">Hypermédia</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../http/rest.html#les-formats-hypermedias">Les formats hypermédias</a></li>
<li class="toctree-l4"><a class="reference internal" href="../http/rest.html#l-en-tete-link">L’en-tête Link</a></li>
<li class="toctree-l4"><a class="reference internal" href="../http/rest.html#les-apports-de-l-hypermedia">Les apports de l’hypermédia</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../http/rest.html#rest-ca-veut-dire-quoi">REST : ça veut dire quoi ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/rest.html#les-api-web">Les API Web</a></li>
<li class="toctree-l3"><a class="reference internal" href="../http/rest.html#references">Références</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../http/rest.html#sites-web-articles">Sites Web &amp; articles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../http/rest.html#livres">Livres</a></li>
<li class="toctree-l4"><a class="reference internal" href="../http/rest.html#applications-de-demo">Applications de démo</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../http/rest.html#exercices">Exercices</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Introduction à Git</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../git/git.html">Git</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../git/git.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/git.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/git.html#initialisation-d-un-depot">Initialisation d’un dépôt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/git.html#suivi-des-modifications-du-depot">Suivi des modifications du dépôt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/git.html#validation-des-modifications">Validation des modifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/git.html#utilisation-d-un-depot-distant">Utilisation d’un dépôt distant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/git.html#exclusion-de-fichiers">Exclusion de fichiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/git.html#les-etiquettes">Les étiquettes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/git.html#les-branches">Les branches</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../git/git.html#rebase">Rebase</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../git/git.html#git-hub">Git Hub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/git.html#references">Références</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/git.html#exercices">Exercices</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Déploiement d'application</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="deploiement_maven.html">Déploiement à partir de Maven</a><ul>
<li class="toctree-l2"><a class="reference internal" href="deploiement_maven.html#utilisation-de-maven-en-ligne-de-commandes">Utilisation de Maven en ligne de commandes</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploiement_maven.html#exercice">Exercice</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploiement_maven.html#gestion-des-plugins-dans-maven">Gestion des plugins dans Maven</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploiement_maven.html#association-d-un-plugin-a-une-phase-d-execution">Association d’un plugin à une phase d’exécution</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploiement_maven.html#deploiement-automatise-dans-tomcat">Déploiement automatisé dans Tomcat</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploiement_maven.html#id1">Exercice</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploiement_maven.html#export-des-identifiants-du-serveur">Export des identifiants du serveur</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploiement_maven.html#id2">Exercice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deploiement_jenkins.html">Déploiement à partir de Jenkins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="deploiement_jenkins.html#installation-de-jenkins">Installation de Jenkins</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploiement_jenkins.html#exercices">Exercices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deploiement_heroku.html">Déploiement vers Heroku</a><ul>
<li class="toctree-l2"><a class="reference internal" href="deploiement_heroku.html#installation-de-heroku-cli">Installation de heroku-CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploiement_heroku.html#creation-d-une-application-heroku">Création d’une application Heroku</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploiement_heroku.html#deploiement-d-une-application">Déploiement d’une application</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploiement_heroku.html#associer-a-un-depot-git-existant">Associer à un dépôt Git existant</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Déploiement avec Docker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#principe-de-docker">Principe de Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-de-docker">Installation de Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linux">Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="#macos">MacOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#windows-10-professionnel">Windows 10 Professionnel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#autres-versions-de-windows-ou-macos">Autres versions de Windows ou MacOS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#prise-en-main-de-docker">Prise en main de Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creer-et-lancer-un-conteneur">Créer et lancer un conteneur</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gerer-les-images">Gérer les images</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gerer-les-conteneurs">Gérer les conteneurs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lancer-un-serveur-tomcat-depuis-docker">Lancer un serveur Tomcat depuis Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercice">Exercice</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creer-une-image">Créer une image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Exercice</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploiement-d-une-image-sur-docker-hub">Déploiement d’une image sur Docker Hub</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creation-d-une-chaine-de-compilation">Création d’une chaîne de compilation</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">U'Dev 2019</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Accueil</a> &raquo;</li>
        
      <li>Déploiement avec Docker</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
      
        <a href="deploiement_heroku.html" class="btn btn-neutral" title="Déploiement vers Heroku" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deploiement-avec-docker">
<h1>Déploiement avec Docker<a class="headerlink" href="#deploiement-avec-docker" title="Lien permanent vers ce titre">¶</a></h1>
<p><a class="reference external" href="https://docker.com">Docker</a> est une solution de virtualisation applicative. Le principe de <a class="reference external" href="https://docker.com">Docker</a>
est de permettre de créer un conteneur pour une application ainsi que pour toutes ses
dépendances. Par exemple un conteneur d’une application Web Java contiendra, non
seulement l’application Web, mais également le serveur et toutes ses dépendances
pour pouvoir être exécuté. Ainsi une solution applicative est composée d’une myriade
de conteneurs (un pour chaque composant) : serveurs Web, serveurs de base de données…</p>
<p>Contrairement à la virtualisation, <a class="reference external" href="https://docker.com">Docker</a> ne simule pas une infrastructure physique
mais uniquement l’environnement logiciel minimal. Ainsi, un conteneur <a class="reference external" href="https://docker.com">Docker</a>
est plus léger que l’image d’une machine virtuelle. Cette solution offre beaucoup
plus de souplesse d’utilisation qu’une virtualisation de machine tout en offrant
les mêmes avantages.</p>
<p><a class="reference external" href="https://docker.com">Docker</a> fait partie des outils couramment utilisés dans une approche <a class="reference external" href="https://fr.wikipedia.org/wiki/Devops">DevOps</a>. En
effet, il facilite grandement une intégration des problématiques de développement
logiciel et de maintenance des infrastructures. Une équipe de développement est
en mesure de produire un conteneur <a class="reference external" href="https://docker.com">Docker</a> autonome et plus facilement déployable.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Techniquement, <a class="reference external" href="https://docker.com">Docker</a> utilise la fonctionnalité <a class="reference external" href="https://fr.wikipedia.org/wiki/Cgroups">cgroups</a> du noyau Linux qui
permet d’isoler et de limiter l’utilisation des ressources d’un processus.
<a class="reference external" href="https://docker.com">Docker</a> est donc une technologie Linux. Pour l’utiliser sur d’autres systèmes
d’exploitation, il faut passer par une solution de virtualisation de machine.
Les distributions professionnelles de Microsoft Windows intègrent un serveur
de virtualisation nommé Hyper-V qui permet de lancer un système Linux pour
accueillir les conteneurs.</p>
</div>
<div class="section" id="principe-de-docker">
<h2>Principe de Docker<a class="headerlink" href="#principe-de-docker" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="https://docker.com">Docker</a> représente une application sous la forme d’une image. De très nombreuses
images sont disponibles en ligne et peuvent être téléchargées directement. Une
image contient une application et toutes ses dépendances. Elle peut donc être
directement exécutée par <a class="reference external" href="https://docker.com">Docker</a>. Une image est identifiée par son dépôt d’origine
(<em>repository</em>) et un <em>tag</em> (généralement la version de l’image). Exécuter une
image crée une <strong>conteneur</strong>. Il est possible de lancer autant de conteneurs que
l’on souhaite à partir d’une image si l’on veut exécuter simultanément la même
application.</p>
<p>Ainsi, avec <a class="reference external" href="https://docker.com">Docker</a>, mettre à jour une application consiste à télécharger (<em>pull</em>)
une nouvelle image, arrêter l’ancien conteneur et démarrer un conteneur à
partir de la dernière image. On voit ainsi que les procédures de mise à jour
sont considérablement simplifiées et sont facilement testables et maîtrisables.</p>
</div>
<div class="section" id="installation-de-docker">
<h2>Installation de Docker<a class="headerlink" href="#installation-de-docker" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour que <a class="reference external" href="https://docker.com">Docker</a> fonctionne, il faut que le processeur de la machine supporte
la virtualisation et que cette fonctionnalité soit activée.</p>
<div class="section" id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour Linux, <a class="reference external" href="https://docker.com">Docker</a> est disponible dans le gestionnaire de paquets des distributions.
Pour une distribution type Debian, vous pouvez par exemple l’installer avec :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ sudo apt install docker
</pre></div>
</div>
</div>
<div class="section" id="macos">
<h3>MacOS<a class="headerlink" href="#macos" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour MacOS, vous pouvez télécharger <em>Docker Desktop</em> à cette adresse :</p>
<blockquote>
<div><p><a class="reference external" href="https://hub.docker.com/editions/community/docker-ce-desktop-mac/">https://hub.docker.com/editions/community/docker-ce-desktop-mac/</a></p>
</div></blockquote>
<p>Comme pour la plupart des applications, en double cliquant sur l’icône du fichier,
vous pourrez déplacer <a class="reference external" href="https://docker.com">Docker</a> dans le répertoire des applications pour l’installer.</p>
</div>
<div class="section" id="windows-10-professionnel">
<h3>Windows 10 Professionnel<a class="headerlink" href="#windows-10-professionnel" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour Windows 10 Professionnel ou Windows Server, vous pouvez télécharger <em>Docker
Desktop</em> à cette adresse :</p>
<blockquote>
<div><p><a class="reference external" href="https://hub.docker.com/editions/community/docker-ce-desktop-windows/">https://hub.docker.com/editions/community/docker-ce-desktop-windows/</a></p>
</div></blockquote>
</div>
<div class="section" id="autres-versions-de-windows-ou-macos">
<h3>Autres versions de Windows ou MacOS<a class="headerlink" href="#autres-versions-de-windows-ou-macos" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si vous ne disposez pas de Windows 10 Professionnel (ou Windows Server), le système
ne dispose pas de Hyper-V et il n’est pas possible d’installer directement <a class="reference external" href="https://docker.com">Docker</a>.
Pour les versions de MacOS antérieures à 10.10.3, vous ne pouvez pas non plus
installer <em>Docker Desktop</em>.</p>
<p>Cependant, vous pouvez télécharger <em>Docker Toolbox</em> à cette adresse :</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.docker.com/toolbox/overview/">https://docs.docker.com/toolbox/overview/</a></p>
</div></blockquote>
<p><em>Docker Toolbox</em> inclut une installation de VirtualBox qui va également installer
une machine virtuelle Linux et un serveur <a class="reference external" href="https://docker.com">Docker</a> dans cette machine.</p>
<div class="admonition caution">
<p class="admonition-title">Prudence</p>
<p>Si VirtualBox est déjà installé sur le système, il faut l’arrêter avant
de lancer l’installation de <em>Docker Toolbox</em>.</p>
</div>
<p>Une fois installé, lancer <em>Docker Quickstart</em> pour installer la machine virtuelle
Linux.</p>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>Une fois que <a class="reference external" href="https://docker.com">Docker</a> n’est plus nécessaire, vous pouvez arrêter la machine
virtuelle avec la commande :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker-machine stop
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="prise-en-main-de-docker">
<h2>Prise en main de Docker<a class="headerlink" href="#prise-en-main-de-docker" title="Lien permanent vers ce titre">¶</a></h2>
<p>Ouvrez un terminal et tapez la commande :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker version
</pre></div>
</div>
<div class="section" id="creer-et-lancer-un-conteneur">
<h3>Créer et lancer un conteneur<a class="headerlink" href="#creer-et-lancer-un-conteneur" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour créer et lancer un conteneur, on utilise la commande <code class="docutils literal notranslate"><span class="pre">container</span> <span class="pre">run</span></code> suivi
des options et du nom de l’image à partir de laquelle on souhaite créer le conteneur.
Essayez la commande</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container run --name bonjour hello-world
</pre></div>
</div>
<p>La commande ci-dessus crée et lance un nouveau conteneur appelé <code class="docutils literal notranslate"><span class="pre">bonjour</span></code> à
partir de l’image <code class="docutils literal notranslate"><span class="pre">hello-world</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>Si vous ne fournissez pas de nom au conteneur, <a class="reference external" href="https://docker.com">Docker</a> en génère un automatiquement.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>Par défaut, <a class="reference external" href="https://docker.com">Docker</a> va chercher l’image avec le <em>tag</em> <em>latest</em>. Le <em>tag</em> est
utilisé le plus souvent pour spécifier la version. Si vous voulez préciser
une version d’un conteneur, il suffit de la préciser après le nom de l’image
en les séparant par <code class="docutils literal notranslate"><span class="pre">:</span></code>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container run --name monalpine alpine:3.6.5
</pre></div>
</div>
</div>
<p>La première fois que vous lancez cette commande, <a class="reference external" href="https://docker.com">Docker</a> cherche localement l’image
<code class="docutils literal notranslate"><span class="pre">hello-world</span></code>. Comme elle n’est pas disponible, il va d’abord télécharger l’image
sur le réseau. Puis crée le conteneur et le lance. Cette application se contente
d’afficher <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">from</span> <span class="pre">Docker!</span></code> ainsi que des informations additionnelles.</p>
</div>
<div class="section" id="gerer-les-images">
<h3>Gérer les images<a class="headerlink" href="#gerer-les-images" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous pouvez lister les images disponibles localement avec la commande :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker image ls
</pre></div>
</div>
<p>Vous pouvez chercher une image disponible en ligne avec la commande :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker search <span class="o">[</span>NOM<span class="o">]</span>
</pre></div>
</div>
<p>Vous pouvez supprimer une image localement avec la commande :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker image rm <span class="o">[</span>REPOSITORY<span class="o">]</span>:<span class="o">[</span>TAG<span class="o">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Vous ne pouvez pas supprimer une image s’il existe un ou plusieurs conteneurs
créés à partir de cette image. Vous pouvez néanmoins forcer la suppression
avec l’option <code class="docutils literal notranslate"><span class="pre">-f</span></code> :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker image rm -f <span class="o">[</span>REPOSITORY<span class="o">]</span>:<span class="o">[</span>TAG<span class="o">]</span>
</pre></div>
</div>
</div>
<p>Pour supprimer toutes les images qui ne sont plus utilisées par un conteneur :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker image prune
</pre></div>
</div>
</div>
<div class="section" id="gerer-les-conteneurs">
<h3>Gérer les conteneurs<a class="headerlink" href="#gerer-les-conteneurs" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous pouvez lister les conteneurs en cours d’exécution avec la commande :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container ps
</pre></div>
</div>
<p>Pour lister tous les conteneurs quel que soit leur état, utilisez l’option <code class="docutils literal notranslate"><span class="pre">-a</span></code> :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container ps -a
</pre></div>
</div>
<p>Pour relancer un conteneur existant :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container start <span class="o">[</span>NOM<span class="o">]</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>Un conteneur a également un identifiant unique généré par <a class="reference external" href="https://docker.com">Docker</a>. Vous pouvez
connaître l’identifiant d’un conteneur lorsque vous les listez. Pour toutes
les commandes qui attendent le nom d’un container, vous pouvez à la place
indiquer son identifiant.</p>
</div>
<p>Par défaut, un conteneur est démarré en mode <em>detached</em>. Cela signifie
que l’entrée standard (STDIN) et les sorties (STDOUT / STDERR) ne sont pas attachées
au terminal. Si le conteneur contient une application serveur, c’est généralement
le comportement attendu. Sinon il faut utiliser le paramètre <code class="docutils literal notranslate"><span class="pre">-a</span></code> pour attacher
les sorties et <code class="docutils literal notranslate"><span class="pre">-i</span></code> pour attacher les entrées :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container run -ai bonjour
</pre></div>
</div>
<p>Pour arrêter un conteneur :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container stop <span class="o">[</span>NOM<span class="o">]</span>
</pre></div>
</div>
<p>Pour supprimer un conteneur :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container rm <span class="o">[</span>NOM<span class="o">]</span>
</pre></div>
</div>
<p>Par défaut une image définit un point d’entrée, c’est-à-dire une commande à exécuter
au lancement d’un conteneur. Pour une image d’un serveur Web, il s’agit de la commande
qui lance le serveur. Mais il est également possible de passer la commande à exécuter
lors de l’appel à la commande <code class="docutils literal notranslate"><span class="pre">run</span></code>.</p>
<p>Par exemple, si nous voulons démarrer une invite de commande dans une image d’un système
Linux Alpine, nous pouvons créer un conteneur de la manière suivante :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container run --name monlinux -ti alpine /bin/sh
</pre></div>
</div>
<p>L’option <code class="docutils literal notranslate"><span class="pre">-i</span></code> indique que l’on veut démarrer le conteneur en mode interactif
et donc attacher l’entrée standard du conteneur à l’invite de commandes. L’option
<code class="docutils literal notranslate"><span class="pre">-t</span></code> indique que le veut allouer un pseudo terminal pour recevoir un affichage.
Ce conteneur est défini avec comme point d’entrée <code class="docutils literal notranslate"><span class="pre">/bin/sh</span></code> qui est le programme
<em>shell</em> sur une distribution Linux Alpine. Donc, le conteneur va continuer à
s’exécuter jusqu’à ce que nous fermions le terminal grâce, par exemple, à la commande
<code class="docutils literal notranslate"><span class="pre">exit</span></code>.</p>
<p>Pour supprimer tous les conteneurs qui ne sont plus en cours d’exécution :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container prune
</pre></div>
</div>
</div>
</div>
<div class="section" id="lancer-un-serveur-tomcat-depuis-docker">
<h2>Lancer un serveur Tomcat depuis Docker<a class="headerlink" href="#lancer-un-serveur-tomcat-depuis-docker" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="https://docker.com">Docker</a> fournit une image nommée <code class="docutils literal notranslate"><span class="pre">tomcat</span></code> du serveur Java Apache Tomcat. Le
serveur écoute sur le port 8080 du conteneur. Pour pouvoir accéder au serveur,
il faut associer ce port à un port de la machine hôte grâce à l’option <code class="docutils literal notranslate"><span class="pre">-p</span></code> en
utilisant la syntaxe suivante :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>-p <span class="o">[</span>PORT HOTE<span class="o">]</span>:<span class="o">[</span>PORT CONTENEUR<span class="o">]</span>
</pre></div>
</div>
<p>Si on veut que le serveur s’exécute indépendamment du terminal, il faut également
le détacher grâce à l’option <code class="docutils literal notranslate"><span class="pre">-d</span></code> :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container run --name tomlechat -d -p <span class="m">8080</span>:8080 tomcat:9.0.19-jre8-alpine
</pre></div>
</div>
<p>Un fois le conteneur lancé, il sera accessible à l’adresse IP de la machine hôte
sur le port 8080.</p>
</div>
<div class="section" id="exercice">
<h2>Exercice<a class="headerlink" href="#exercice" title="Lien permanent vers ce titre">¶</a></h2>
<div class="admonition-deployer-une-application-web-java-dans-un-conteneur admonition">
<p class="admonition-title">Déployer une application Web Java dans un conteneur</p>
<p>La commande <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">cp</span></code> permet de copier un fichier local dans un conteneur
(ou l’inverse).</p>
<p>Générez un fichier WAR et copiez ce fichier dans le répertoire
<code class="docutils literal notranslate"><span class="pre">/usr/local/tomcat/webapps</span></code> du conteneur afin de déployer l’application
dans le conteneur.</p>
</div>
</div>
<div class="section" id="creer-une-image">
<h2>Créer une image<a class="headerlink" href="#creer-une-image" title="Lien permanent vers ce titre">¶</a></h2>
<p>La commande <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span></code> permet de créer une image. Cette commande s’attend
à trouver un fichier nommé <code class="file docutils literal notranslate"><span class="pre">Dockerfile</span></code> dans le répertoire indiqué. Ce fichier
est un fichier texte qui décrit l’image et les opérations à réaliser pour la créer.</p>
<p>Le principe d’une image est qu’elle est conçue comme une succession de couches
(<em>layers</em>) qui correspondent à des opérations à effectuer lors de sa création.
Ainsi, une image est généralement basée sur une autre image en ajoutant une ou
plusieurs couches de modifications. Par exemple, pour créer une image d’une application
Web Java, nous pouvons partir d’une image d’un serveur Tomcat dans lequel nous
ajoutons les fichiers nécessaires au déploiement. Pour cela, nous allons créer
le fichier <code class="file docutils literal notranslate"><span class="pre">Dockerfile</span></code> de l’image :</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Dockerfile pour une application Web Java</span><a class="headerlink" href="#id2" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>FROM tomcat:9.0-jre8-alpine

COPY target/monapp*.war $CATALINA_HOME/webapps/monapp.war
</pre></div>
</div>
</div>
<p>La première ligne du fichier indique que l’image doit être construite à partir
de l’image <code class="docutils literal notranslate"><span class="pre">tomcat:9.0-jre8-alpine</span></code>. La ligne suivante est une commande qui
va créer une nouvelle couche : il s’agit de copier un fichier du répertoire
<code class="file docutils literal notranslate"><span class="pre">target</span></code> de la machine hôte dans le répertoire <code class="file docutils literal notranslate"><span class="pre">$CATALINA_HOME/webapps</span></code> de l’image
avec le nom <code class="file docutils literal notranslate"><span class="pre">monapp.war</span></code>. Ainsi, si le fichier <code class="file docutils literal notranslate"><span class="pre">Dockerfile</span></code> est placé
à la racine d’un projet Maven qui produit un fichier WAR, il est très facile de créer
une image après le packaging de l’application :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ mvn clean package
$ docker image build -t local/monapp:latest .
</pre></div>
</div>
<p>L’option <code class="docutils literal notranslate"><span class="pre">-t</span></code> permet d’indiquer le <em>repository</em> et le <em>tag</em> de l’image. Le <code class="docutils literal notranslate"><span class="pre">.</span></code>
à la fin de la commande est important puisqu’on indique le répertoire qui contient
le fichier <code class="file docutils literal notranslate"><span class="pre">Dockerfile</span></code>, c’est-à-dire le répertoire courant.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>La variable <code class="docutils literal notranslate"><span class="pre">$CATALINA_HOME</span></code> est une variable d’environnement du conteneur.
Chaque image peut spécifier dans son fichier <code class="file docutils literal notranslate"><span class="pre">Dockerfile</span></code> une ou plusieurs variables
d’environnement. Ainsi l’image <code class="docutils literal notranslate"><span class="pre">tomcat:9.0-jre8-alpine</span></code> définit cette variable
pour désigner le répertoire d’installation de Catalina, le moteur HTTP de
Tomcat. Cette variable peut être utilisée par un fichier <code class="file docutils literal notranslate"><span class="pre">Dockerfile</span></code>
qui réutilise cette image, ce qui évite d’écrire explicitement le chemin.</p>
</div>
<p>Pour plus d’information sur le contenu du fichier <code class="file docutils literal notranslate"><span class="pre">Dockerfile</span></code>, vous
pouvez vous reporter à la documentation officielle :</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a></p>
</div></blockquote>
<p>Nous pouvons vérifier que l’image a bien été créée avec la commande :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker image ls
</pre></div>
</div>
<p>Puis nous pouvons créer un conteneur à partir de cette nouvelle image :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container run --name monapp -d -p <span class="m">8080</span>:8080 local/monapp
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h2>Exercice<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h2>
<div class="exercice admonition">
<p class="admonition-title">Créer l’image d’une application et un conteneur</p>
<p>À partir d’un projet Maven générant une application Web Java, créez le
fichier <code class="file docutils literal notranslate"><span class="pre">Dockerfile</span></code> pour construire l’image complète de votre application.</p>
<p>Créez l’image puis un conteneur à partir de cette image.</p>
</div>
</div>
<div class="section" id="deploiement-d-une-image-sur-docker-hub">
<h2>Déploiement d’une image sur Docker Hub<a class="headerlink" href="#deploiement-d-une-image-sur-docker-hub" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="https://hub.docker.com/">Docker Hub</a> est un site permettant d’héberger et de partager des images <a class="reference external" href="https://docker.com">Docker</a>.
Si vous souhaitez créer vos propres images <a class="reference external" href="https://docker.com">Docker</a>, il suffit de créer un compte
en ligne.</p>
<div class="exercice admonition">
<p class="admonition-title">Compte Docker Hub</p>
<p>Créez un compte sur Docker Hub :</p>
<blockquote>
<div><p><a class="reference external" href="https://hub.docker.com/signup?next=%2F%3Fref%3Dlogin">https://hub.docker.com/signup?next=%2F%3Fref%3Dlogin</a></p>
</div></blockquote>
</div>
<p>Pour pouvoir être déployée dans votre compte, une image avoir un nom de la forme :</p>
<blockquote>
<div><p>[LOGIN]/[NOM DEPOT]</p>
</div></blockquote>
<p>Vous pouvez créer un nouveau dépôt depuis le site Web. Ensuite, il faut vous connecter
à votre compte depuis la ligne de commandes :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker login
</pre></div>
</div>
<div class="admonition caution">
<p class="admonition-title">Prudence</p>
<p>Si vous n’utilisez pas votre propre ordinateur, n’oubliez pas de vous
déconnecter à la fin :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker <span class="nb">logout</span>
</pre></div>
</div>
</div>
<p>Ensuite vous devez disposer d’une image avec le même nom en local. Si ce n’est
pas le cas, vous pouvez créer un nouveau <em>tag</em> à partir d’un tag existant :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker image tag local/monapp:latest spoonless/monapp:latest
</pre></div>
</div>
<p>Ensuite, vous pouvez envoyer votre image sur <a class="reference external" href="https://hub.docker.com/">Docker Hub</a> avec la commande
<code class="docutils literal notranslate"><span class="pre">push</span></code> :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker image push spoonless/monapp:latest
</pre></div>
</div>
<p>Cette image est maintenant disponible en ligne et il est possible de créer un
conteneur depuis n’importe quelle machine qui a accès à ce dépôt :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ docker container run --name monapp -d -p <span class="m">8080</span>:8080 spoonless/monapp
</pre></div>
</div>
</div>
<div class="section" id="creation-d-une-chaine-de-compilation">
<h2>Création d’une chaîne de compilation<a class="headerlink" href="#creation-d-une-chaine-de-compilation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Avec un <code class="file docutils literal notranslate"><span class="pre">Dockerfile</span></code>, il est possible de créer une image intermédiaire.
Cela s’avère très pratique pour construire une chaîne de compilation (<em>toolchain</em>).
L’image intermédiaire est utilisée pour créer un conteneur. Ce dernier produit
la solution compilée qui est ensuite copiée dans l’image finale.</p>
<p>Ainsi, pour un projet Java, on peut construire une première image basée sur
une image Maven pour y placer les sources du projet et lancer le packaging.
Le package ainsi produit est copié dans une seconde image qui correspond à l’image
finale.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Dockerfile pour une chaîne de compilation</span><a class="headerlink" href="#id3" title="Lien permanent vers ce code">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>FROM maven:3.6.1-jdk-8-alpine AS MAVEN_TOOL_CHAIN
COPY pom.xml /tmp/
COPY src /tmp/src/
WORKDIR /tmp/
RUN mvn package

FROM tomcat:9.0-jre8-alpine
COPY --from=MAVEN_TOOL_CHAIN /tmp/target/monapp*.war $CATALINA_HOME/webapps/monapp.war
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="deploiement_heroku.html" class="btn btn-neutral float-left" title="Déploiement vers Heroku" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright David Gayerie - david.gayerie at epsi.fr - CC-BY-SA

    </p>
  </div>
    <div>Téléchargez ce support au format <a class="reference download" href="https://github.com/spoonless/udev-2019/archive/gh-pages.zip">HTML</a>
    </div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>